{"ast":null,"code":"var _jsxFileName = \"/Users/diego/Documents/GitHub/part-2/phonebook/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/persons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [filteredValue, setFilteredValue] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n\n  const getPerson = () => {\n    personService.getAll().then(response => {\n      const persons = response.data;\n      setPersons(persons);\n    }, err => {\n      setPersons([{\n        name: 'error loading persons'\n      }]);\n    });\n  };\n\n  useEffect(() => getPerson, []);\n\n  const addName = event => {\n    event.preventDefault();\n\n    if (newName && newName !== '' && newNumber && newNumber !== '') {\n      if (personDoesntExists(newName)) {\n        personService.create({\n          name: newName,\n          number: newNumber,\n          id: Date.now()\n        }).then(response => {\n          setPersons([...persons, response.data]);\n          setNewName('');\n          setNewNumber('');\n          setSuccessMessage(`Added ${response.data.name}`);\n        }, err => alert(err));\n        console.log(persons);\n      } else {\n        updateUser();\n      }\n    }\n  };\n\n  const personDoesntExists = name => {\n    return !persons.find(persona => persona.name.toLowerCase() === name.toLowerCase());\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterValues = event => {\n    setFilteredValue(event.target.value);\n    setFilteredPersons(persons.filter(persona => persona.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  };\n\n  const handleDelete = personToDelete => {\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      personService.remove(personToDelete.id).then(response => {\n        setPersons(persons.filter(persona => persona.id !== personToDelete.id));\n      });\n    }\n  };\n\n  const updateUser = () => {\n    if (window.confirm(`${newName.toLowerCase()} is already added to phonebook, replace the old number with a new one?`)) {\n      const found = {\n        name: newName,\n        number: newNumber,\n        id: persons.find(persona => persona.name.toLowerCase() === newName.toLowerCase()).id\n      };\n      personService.update(found).then(res => {\n        setPersons(persons.map(item => item.id === res.data.id ? res.data : item));\n        setSuccessMessage(`Added ${res.data.name}`);\n        setTimeout(() => {\n          setSuccesesMessage('');\n        }, 2000);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      handleFilterValues: handleFilterValues,\n      filteredValue: filteredValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      addName: addName,\n      handleNameChange: handleNameChange,\n      handleNumberChange: handleNumberChange,\n      newName: newName,\n      newNumber: newNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons,\n      filteredValue: filteredValue,\n      filteredPersons: filteredPersons,\n      handleDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"iaCKfIJcUoym7xzYtwj+cqT4/SU=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","personService","App","persons","setPersons","filteredPersons","setFilteredPersons","filteredValue","setFilteredValue","newName","setNewName","newNumber","setNewNumber","successMessage","setSuccessMessage","getPerson","getAll","then","response","data","err","name","addName","event","preventDefault","personDoesntExists","create","number","id","Date","now","alert","console","log","updateUser","find","persona","toLowerCase","handleNameChange","target","value","handleNumberChange","handleFilterValues","filter","includes","handleDelete","personToDelete","window","confirm","remove","found","update","res","map","item","setTimeout","setSuccesesMessage"],"sources":["/Users/diego/Documents/GitHub/part-2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons)\n  const [filteredValue, setFilteredValue] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [successMessage, setSuccessMessage] = useState('')\n  const getPerson = () => {\n    personService\n      .getAll()\n      .then(response => {\n        const persons = response.data;\n        setPersons(persons);\n      }, err => { setPersons([{ name: 'error loading persons' }]) })\n  }\n\n  useEffect(() => getPerson, [])\n\n  const addName = (event) => {\n    event.preventDefault();\n    if (newName && newName !== '' && newNumber && newNumber !== '') {\n      if (personDoesntExists(newName)) {\n        personService.create({ name: newName, number: newNumber, id: Date.now() })\n          .then(response => {\n            setPersons([...persons, response.data]);\n            setNewName('');\n            setNewNumber('');\n            setSuccessMessage(`Added ${response.data.name}`)\n          }, err => alert(err));\n        console.log(persons);\n      } else {\n        updateUser();\n      }\n    }\n  }\n\n  const personDoesntExists = (name) => {\n    return !persons.find(persona => persona.name.toLowerCase() === name.toLowerCase());\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleFilterValues = (event) => {\n    setFilteredValue(event.target.value);\n    setFilteredPersons(persons.filter(persona => persona.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  }\n\n  const handleDelete = (personToDelete) => {\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      personService.remove(personToDelete.id)\n        .then(response => {\n          setPersons(persons.filter(persona => persona.id !== personToDelete.id));\n        });\n    }\n  }\n\n  const updateUser = () => {\n    if (window.confirm(`${newName.toLowerCase()} is already added to phonebook, replace the old number with a new one?`)) {\n      const found = { name: newName, number: newNumber, id: persons.find(persona => persona.name.toLowerCase() === newName.toLowerCase()).id };\n      personService.update(found).then(res => {\n        setPersons(persons.map(item => item.id === res.data.id ? res.data : item))\n        setSuccessMessage(`Added ${res.data.name}`)\n        setTimeout(() => {\n          setSuccesesMessage('');\n        }, 2000)\n      });\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter handleFilterValues={handleFilterValues} filteredValue={filteredValue} />\n      <h2>add a new</h2>\n      <PersonForm addName={addName} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filteredValue={filteredValue} filteredPersons={filteredPersons} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;;;AAEA,MAAMC,GAAG,GAAG,MAAM;EAAA;;EAChB,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACS,eAAD,EAAkBC,kBAAlB,IAAwCV,QAAQ,CAACO,OAAD,CAAtD;EACA,MAAM,CAACI,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,EAAD,CAAlD;EACA,MAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACiB,cAAD,EAAiBC,iBAAjB,IAAsClB,QAAQ,CAAC,EAAD,CAApD;;EACA,MAAMmB,SAAS,GAAG,MAAM;IACtBd,aAAa,CACVe,MADH,GAEGC,IAFH,CAEQC,QAAQ,IAAI;MAChB,MAAMf,OAAO,GAAGe,QAAQ,CAACC,IAAzB;MACAf,UAAU,CAACD,OAAD,CAAV;IACD,CALH,EAKKiB,GAAG,IAAI;MAAEhB,UAAU,CAAC,CAAC;QAAEiB,IAAI,EAAE;MAAR,CAAD,CAAD,CAAV;IAAiD,CAL/D;EAMD,CAPD;;EASAxB,SAAS,CAAC,MAAMkB,SAAP,EAAkB,EAAlB,CAAT;;EAEA,MAAMO,OAAO,GAAIC,KAAD,IAAW;IACzBA,KAAK,CAACC,cAAN;;IACA,IAAIf,OAAO,IAAIA,OAAO,KAAK,EAAvB,IAA6BE,SAA7B,IAA0CA,SAAS,KAAK,EAA5D,EAAgE;MAC9D,IAAIc,kBAAkB,CAAChB,OAAD,CAAtB,EAAiC;QAC/BR,aAAa,CAACyB,MAAd,CAAqB;UAAEL,IAAI,EAAEZ,OAAR;UAAiBkB,MAAM,EAAEhB,SAAzB;UAAoCiB,EAAE,EAAEC,IAAI,CAACC,GAAL;QAAxC,CAArB,EACGb,IADH,CACQC,QAAQ,IAAI;UAChBd,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAae,QAAQ,CAACC,IAAtB,CAAD,CAAV;UACAT,UAAU,CAAC,EAAD,CAAV;UACAE,YAAY,CAAC,EAAD,CAAZ;UACAE,iBAAiB,CAAE,SAAQI,QAAQ,CAACC,IAAT,CAAcE,IAAK,EAA7B,CAAjB;QACD,CANH,EAMKD,GAAG,IAAIW,KAAK,CAACX,GAAD,CANjB;QAOAY,OAAO,CAACC,GAAR,CAAY9B,OAAZ;MACD,CATD,MASO;QACL+B,UAAU;MACX;IACF;EACF,CAhBD;;EAkBA,MAAMT,kBAAkB,GAAIJ,IAAD,IAAU;IACnC,OAAO,CAAClB,OAAO,CAACgC,IAAR,CAAaC,OAAO,IAAIA,OAAO,CAACf,IAAR,CAAagB,WAAb,OAA+BhB,IAAI,CAACgB,WAAL,EAAvD,CAAR;EACD,CAFD;;EAIA,MAAMC,gBAAgB,GAAIf,KAAD,IAAW;IAClCb,UAAU,CAACa,KAAK,CAACgB,MAAN,CAAaC,KAAd,CAAV;EACD,CAFD;;EAGA,MAAMC,kBAAkB,GAAIlB,KAAD,IAAW;IACpCX,YAAY,CAACW,KAAK,CAACgB,MAAN,CAAaC,KAAd,CAAZ;EACD,CAFD;;EAIA,MAAME,kBAAkB,GAAInB,KAAD,IAAW;IACpCf,gBAAgB,CAACe,KAAK,CAACgB,MAAN,CAAaC,KAAd,CAAhB;IACAlC,kBAAkB,CAACH,OAAO,CAACwC,MAAR,CAAeP,OAAO,IAAIA,OAAO,CAACf,IAAR,CAAagB,WAAb,GAA2BO,QAA3B,CAAoCrB,KAAK,CAACgB,MAAN,CAAaC,KAAb,CAAmBH,WAAnB,EAApC,CAA1B,CAAD,CAAlB;EACD,CAHD;;EAKA,MAAMQ,YAAY,GAAIC,cAAD,IAAoB;IACvC,IAAIC,MAAM,CAACC,OAAP,CAAgB,UAASF,cAAc,CAACzB,IAAK,GAA7C,CAAJ,EAAsD;MACpDpB,aAAa,CAACgD,MAAd,CAAqBH,cAAc,CAAClB,EAApC,EACGX,IADH,CACQC,QAAQ,IAAI;QAChBd,UAAU,CAACD,OAAO,CAACwC,MAAR,CAAeP,OAAO,IAAIA,OAAO,CAACR,EAAR,KAAekB,cAAc,CAAClB,EAAxD,CAAD,CAAV;MACD,CAHH;IAID;EACF,CAPD;;EASA,MAAMM,UAAU,GAAG,MAAM;IACvB,IAAIa,MAAM,CAACC,OAAP,CAAgB,GAAEvC,OAAO,CAAC4B,WAAR,EAAsB,wEAAxC,CAAJ,EAAsH;MACpH,MAAMa,KAAK,GAAG;QAAE7B,IAAI,EAAEZ,OAAR;QAAiBkB,MAAM,EAAEhB,SAAzB;QAAoCiB,EAAE,EAAEzB,OAAO,CAACgC,IAAR,CAAaC,OAAO,IAAIA,OAAO,CAACf,IAAR,CAAagB,WAAb,OAA+B5B,OAAO,CAAC4B,WAAR,EAAvD,EAA8ET;MAAtH,CAAd;MACA3B,aAAa,CAACkD,MAAd,CAAqBD,KAArB,EAA4BjC,IAA5B,CAAiCmC,GAAG,IAAI;QACtChD,UAAU,CAACD,OAAO,CAACkD,GAAR,CAAYC,IAAI,IAAIA,IAAI,CAAC1B,EAAL,KAAYwB,GAAG,CAACjC,IAAJ,CAASS,EAArB,GAA0BwB,GAAG,CAACjC,IAA9B,GAAqCmC,IAAzD,CAAD,CAAV;QACAxC,iBAAiB,CAAE,SAAQsC,GAAG,CAACjC,IAAJ,CAASE,IAAK,EAAxB,CAAjB;QACAkC,UAAU,CAAC,MAAM;UACfC,kBAAkB,CAAC,EAAD,CAAlB;QACD,CAFS,EAEP,IAFO,CAAV;MAGD,CAND;IAOD;EACF,CAXD;;EAaA,oBACE;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,MAAD;MAAQ,kBAAkB,EAAEd,kBAA5B;MAAgD,aAAa,EAAEnC;IAA/D;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAHF,eAIE,QAAC,UAAD;MAAY,OAAO,EAAEe,OAArB;MAA8B,gBAAgB,EAAEgB,gBAAhD;MAAkE,kBAAkB,EAAEG,kBAAtF;MAA0G,OAAO,EAAEhC,OAAnH;MAA4H,SAAS,EAAEE;IAAvI;MAAA;MAAA;MAAA;IAAA,QAJF,eAKE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QALF,eAME,QAAC,OAAD;MAAS,OAAO,EAAER,OAAlB;MAA2B,aAAa,EAAEI,aAA1C;MAAyD,eAAe,EAAEF,eAA1E;MAA2F,YAAY,EAAEwC;IAAzG;MAAA;MAAA;MAAA;IAAA,QANF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAUD,CApFD;;GAAM3C,G;;KAAAA,G;AAsFN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}