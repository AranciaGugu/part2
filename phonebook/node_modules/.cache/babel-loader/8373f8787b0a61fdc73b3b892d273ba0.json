{"ast":null,"code":"var _jsxFileName = \"/Users/diego/Documents/GitHub/part-2/phonebook/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/persons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [filteredValue, setFilteredValue] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n\n  const getPerson = () => {\n    personService.getAll().then(response => {\n      const persons = response.data;\n      setPersons(persons);\n    }, err => {\n      setPersons([{\n        name: 'error loading persons'\n      }]);\n    });\n  };\n\n  useEffect(() => getPerson, []);\n\n  const addName = event => {\n    event.preventDefault();\n\n    if (newName && newName !== '' && newNumber && newNumber !== '') {\n      if (personDoesntExists(newName)) {\n        personService.create({\n          name: newName,\n          number: newNumber,\n          id: Date.now()\n        }).then(response => {\n          setPersons([...persons, response.data]);\n          setNewName('');\n          setNewNumber('');\n        }, err => alert(err));\n        console.log(persons);\n      } else {\n        updateUser();\n      }\n    }\n  };\n\n  const personDoesntExists = name => {\n    return !persons.find(persona => persona.name.toLowerCase() === name.toLowerCase());\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterValues = event => {\n    setFilteredValue(event.target.value);\n    setFilteredPersons(persons.filter(persona => persona.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  };\n\n  const handleDelete = personToDelete => {\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      personService.remove(personToDelete.id).then(response => {\n        setPersons(persons.filter(persona => persona.id !== personToDelete.id));\n      });\n    }\n  };\n\n  const updateUser = () => {\n    if (window.confirm(`${newName.toLowerCase()} is already added to phonebook, replace the old number with a new one?`)) {\n      const found = {\n        name: newName,\n        number: newNumber,\n        id: persons.find(persona => persona.name.toLowerCase() === newName.toLowerCase()).id\n      };\n      personService.update(found).then(res => {\n        console.log(res.data.id, persons);\n\n        if (persons.indexOf(item => item.id === found.id) !== -1) {\n          console.log('OH YEEEEAH');\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      handleFilterValues: handleFilterValues,\n      filteredValue: filteredValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      addName: addName,\n      handleNameChange: handleNameChange,\n      handleNumberChange: handleNumberChange,\n      newName: newName,\n      newNumber: newNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons,\n      filteredValue: filteredValue,\n      filteredPersons: filteredPersons,\n      handleDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"/KxhCoAhfRixpRigj7StpRo4eEI=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","personService","App","persons","setPersons","filteredPersons","setFilteredPersons","filteredValue","setFilteredValue","newName","setNewName","newNumber","setNewNumber","getPerson","getAll","then","response","data","err","name","addName","event","preventDefault","personDoesntExists","create","number","id","Date","now","alert","console","log","updateUser","find","persona","toLowerCase","handleNameChange","target","value","handleNumberChange","handleFilterValues","filter","includes","handleDelete","personToDelete","window","confirm","remove","found","update","res","indexOf","item"],"sources":["/Users/diego/Documents/GitHub/part-2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons)\n  const [filteredValue, setFilteredValue] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const getPerson = () => {\n    personService\n    .getAll()\n    .then(response => {\n      const persons = response.data;\n      setPersons(persons);\n    }, err => {setPersons([{name: 'error loading persons'}])})\n  }\n\n  useEffect(() => getPerson, [])\n\n  const addName = (event) => {\n    event.preventDefault();\n    if (newName && newName !== '' && newNumber && newNumber !== '') {\n      if (personDoesntExists(newName)) {\n        personService.create({ name: newName, number: newNumber, id: Date.now() })\n        .then(response => {\n          setPersons([...persons, response.data]);\n          setNewName('');\n          setNewNumber('');\n        }, err => alert(err));\n        console.log(persons);\n      } else {\n        updateUser();\n      }\n    }\n  }\n\n  const personDoesntExists = (name) => {\n    return !persons.find(persona => persona.name.toLowerCase() === name.toLowerCase());\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleFilterValues = (event) => {\n    setFilteredValue(event.target.value);\n    setFilteredPersons(persons.filter(persona => persona.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  }\n\n  const handleDelete = (personToDelete) => {\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      personService.remove(personToDelete.id)\n        .then(response => {\n          setPersons(persons.filter(persona => persona.id !== personToDelete.id));\n        });\n    }\n  }\n\n  const updateUser = () => {\n    if (window.confirm(`${newName.toLowerCase()} is already added to phonebook, replace the old number with a new one?`)){\n      const found = { name: newName, number: newNumber, id: persons.find(persona => persona.name.toLowerCase() === newName.toLowerCase()).id};\n      personService.update(found).then( res => {\n        console.log(res.data.id, persons);\n        if (persons.indexOf(item => item.id === found.id) !== -1) {\n          console.log('OH YEEEEAH');\n        } \n      })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter handleFilterValues={handleFilterValues} filteredValue={filteredValue} />\n      <h2>add a new</h2>\n      <PersonForm addName={addName} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filteredValue={filteredValue} filteredPersons={filteredPersons} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;;;AAEA,MAAMC,GAAG,GAAG,MAAM;EAAA;;EAChB,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACS,eAAD,EAAkBC,kBAAlB,IAAwCV,QAAQ,CAACO,OAAD,CAAtD;EACA,MAAM,CAACI,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,EAAD,CAAlD;EACA,MAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAC,EAAD,CAA1C;;EACA,MAAMiB,SAAS,GAAG,MAAM;IACtBZ,aAAa,CACZa,MADD,GAECC,IAFD,CAEMC,QAAQ,IAAI;MAChB,MAAMb,OAAO,GAAGa,QAAQ,CAACC,IAAzB;MACAb,UAAU,CAACD,OAAD,CAAV;IACD,CALD,EAKGe,GAAG,IAAI;MAACd,UAAU,CAAC,CAAC;QAACe,IAAI,EAAE;MAAP,CAAD,CAAD,CAAV;IAA8C,CALzD;EAMD,CAPD;;EASAtB,SAAS,CAAC,MAAMgB,SAAP,EAAkB,EAAlB,CAAT;;EAEA,MAAMO,OAAO,GAAIC,KAAD,IAAW;IACzBA,KAAK,CAACC,cAAN;;IACA,IAAIb,OAAO,IAAIA,OAAO,KAAK,EAAvB,IAA6BE,SAA7B,IAA0CA,SAAS,KAAK,EAA5D,EAAgE;MAC9D,IAAIY,kBAAkB,CAACd,OAAD,CAAtB,EAAiC;QAC/BR,aAAa,CAACuB,MAAd,CAAqB;UAAEL,IAAI,EAAEV,OAAR;UAAiBgB,MAAM,EAAEd,SAAzB;UAAoCe,EAAE,EAAEC,IAAI,CAACC,GAAL;QAAxC,CAArB,EACCb,IADD,CACMC,QAAQ,IAAI;UAChBZ,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAaa,QAAQ,CAACC,IAAtB,CAAD,CAAV;UACAP,UAAU,CAAC,EAAD,CAAV;UACAE,YAAY,CAAC,EAAD,CAAZ;QACD,CALD,EAKGM,GAAG,IAAIW,KAAK,CAACX,GAAD,CALf;QAMAY,OAAO,CAACC,GAAR,CAAY5B,OAAZ;MACD,CARD,MAQO;QACL6B,UAAU;MACX;IACF;EACF,CAfD;;EAiBA,MAAMT,kBAAkB,GAAIJ,IAAD,IAAU;IACnC,OAAO,CAAChB,OAAO,CAAC8B,IAAR,CAAaC,OAAO,IAAIA,OAAO,CAACf,IAAR,CAAagB,WAAb,OAA+BhB,IAAI,CAACgB,WAAL,EAAvD,CAAR;EACD,CAFD;;EAIA,MAAMC,gBAAgB,GAAIf,KAAD,IAAW;IAClCX,UAAU,CAACW,KAAK,CAACgB,MAAN,CAAaC,KAAd,CAAV;EACD,CAFD;;EAGA,MAAMC,kBAAkB,GAAIlB,KAAD,IAAW;IACpCT,YAAY,CAACS,KAAK,CAACgB,MAAN,CAAaC,KAAd,CAAZ;EACD,CAFD;;EAIA,MAAME,kBAAkB,GAAInB,KAAD,IAAW;IACpCb,gBAAgB,CAACa,KAAK,CAACgB,MAAN,CAAaC,KAAd,CAAhB;IACAhC,kBAAkB,CAACH,OAAO,CAACsC,MAAR,CAAeP,OAAO,IAAIA,OAAO,CAACf,IAAR,CAAagB,WAAb,GAA2BO,QAA3B,CAAoCrB,KAAK,CAACgB,MAAN,CAAaC,KAAb,CAAmBH,WAAnB,EAApC,CAA1B,CAAD,CAAlB;EACD,CAHD;;EAKA,MAAMQ,YAAY,GAAIC,cAAD,IAAoB;IACvC,IAAIC,MAAM,CAACC,OAAP,CAAgB,UAASF,cAAc,CAACzB,IAAK,GAA7C,CAAJ,EAAsD;MACpDlB,aAAa,CAAC8C,MAAd,CAAqBH,cAAc,CAAClB,EAApC,EACGX,IADH,CACQC,QAAQ,IAAI;QAChBZ,UAAU,CAACD,OAAO,CAACsC,MAAR,CAAeP,OAAO,IAAIA,OAAO,CAACR,EAAR,KAAekB,cAAc,CAAClB,EAAxD,CAAD,CAAV;MACD,CAHH;IAID;EACF,CAPD;;EASA,MAAMM,UAAU,GAAG,MAAM;IACvB,IAAIa,MAAM,CAACC,OAAP,CAAgB,GAAErC,OAAO,CAAC0B,WAAR,EAAsB,wEAAxC,CAAJ,EAAqH;MACnH,MAAMa,KAAK,GAAG;QAAE7B,IAAI,EAAEV,OAAR;QAAiBgB,MAAM,EAAEd,SAAzB;QAAoCe,EAAE,EAAEvB,OAAO,CAAC8B,IAAR,CAAaC,OAAO,IAAIA,OAAO,CAACf,IAAR,CAAagB,WAAb,OAA+B1B,OAAO,CAAC0B,WAAR,EAAvD,EAA8ET;MAAtH,CAAd;MACAzB,aAAa,CAACgD,MAAd,CAAqBD,KAArB,EAA4BjC,IAA5B,CAAkCmC,GAAG,IAAI;QACvCpB,OAAO,CAACC,GAAR,CAAYmB,GAAG,CAACjC,IAAJ,CAASS,EAArB,EAAyBvB,OAAzB;;QACA,IAAIA,OAAO,CAACgD,OAAR,CAAgBC,IAAI,IAAIA,IAAI,CAAC1B,EAAL,KAAYsB,KAAK,CAACtB,EAA1C,MAAkD,CAAC,CAAvD,EAA0D;UACxDI,OAAO,CAACC,GAAR,CAAY,YAAZ;QACD;MACF,CALD;IAMD;EACF,CAVD;;EAYA,oBACE;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,MAAD;MAAQ,kBAAkB,EAAES,kBAA5B;MAAgD,aAAa,EAAEjC;IAA/D;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAHF,eAIE,QAAC,UAAD;MAAY,OAAO,EAAEa,OAArB;MAA8B,gBAAgB,EAAEgB,gBAAhD;MAAkE,kBAAkB,EAAEG,kBAAtF;MAA0G,OAAO,EAAE9B,OAAnH;MAA4H,SAAS,EAAEE;IAAvI;MAAA;MAAA;MAAA;IAAA,QAJF,eAKE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QALF,eAME,QAAC,OAAD;MAAS,OAAO,EAAER,OAAlB;MAA2B,aAAa,EAAEI,aAA1C;MAAyD,eAAe,EAAEF,eAA1E;MAA2F,YAAY,EAAEsC;IAAzG;MAAA;MAAA;MAAA;IAAA,QANF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAUD,CAjFD;;GAAMzC,G;;KAAAA,G;AAmFN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}